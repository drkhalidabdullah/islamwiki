# Version 0.0.0.10 - Critical Bug Fixes & Live Preview Enhancement

**Release Date:** September 9, 2025

## üêõ Critical Bug Fixes

### Post Creation & Management
- **Fixed create_post.php 500 Error**: Resolved internal server error when creating posts
  - Added missing `create_user_post()` function with proper database integration
  - Implemented `get_user_posts_with_markdown()` function for post retrieval
  - Fixed SQL syntax errors and parameter handling
- **Fixed create_article.php Draft Status**: Resolved 500 error when creating draft articles
  - Fixed SQL syntax error with missing quotes in user_id parameter
  - Added missing `createSlug()` function for URL-friendly article slugs
  - Fixed redirect URL format to match .htaccess routing rules
  - Updated article access permissions to allow draft viewing by authors and editors

### User Profile & Content Display
- **Fixed Profile Posts Display**: Resolved issue where user posts weren't showing in profiles
  - Fixed SQL column name mismatch (`avatar_url` vs `avatar`)
  - Corrected database query in `get_user_posts_with_markdown()` function
  - Added proper markdown parsing for post content display
- **Fixed Markdown Parsing**: Resolved regex error preventing markdown rendering
  - Fixed malformed regex pattern in MarkdownParser causing PHP warnings
  - Updated profile page to properly display parsed markdown content
  - Enhanced markdown parser with better block element handling

## ‚ú® New Features & Enhancements

### Live Preview System
- **Side-by-Side Live Preview**: Implemented real-time markdown preview for create_post page
  - Created side-by-side editor and preview layout similar to create_article page
  - Added real-time preview updates as user types (with 100ms debouncing)
  - Enhanced preview with professional styling and responsive design
  - Added toggle functionality to show/hide preview panel

### Watchlist System
- **User Watchlist**: Complete watchlist functionality for tracking article changes
  - Created dedicated watchlist page (`/pages/user/watchlist.php`)
  - Added watchlist API endpoints for add/remove/toggle operations
  - Implemented recent changes tracking for watched articles
  - Added watchlist navigation links in sidebar and dashboard
  - Enhanced article pages with watchlist toggle buttons

### Enhanced User Experience
- **Article History Timestamps**: Added detailed timestamps to article history page
  - Implemented relative time display (e.g., "5 hours ago")
  - Added `time_ago()` utility function for human-readable time formatting
  - Enhanced history page styling with better time information display
- **Improved Error Handling**: Better user feedback throughout the application
  - Enhanced AJAX error handling with specific user-friendly messages
  - Added proper error logging and debugging capabilities
  - Improved form validation and submission feedback

## üîß Technical Improvements

### Database & API Enhancements
- **Enhanced Database Functions**: Added comprehensive user post management
  - `create_user_post()`: Full-featured post creation with media and link support
  - `get_user_posts_with_markdown()`: Optimized post retrieval with markdown parsing
  - `get_recent_watchlist_changes()`: Recent changes tracking for watchlist
  - `get_user_watchlist()`: Paginated watchlist retrieval with user data

### Code Quality & Performance
- **Markdown Parser Improvements**: Enhanced markdown processing capabilities
  - Fixed regex compilation errors preventing proper parsing
  - Improved block element handling and HTML structure
  - Better paragraph and list processing
  - Enhanced code block and inline code formatting
- **Responsive Design**: Improved mobile and tablet experience
  - Enhanced create_post page layout for all screen sizes
  - Better mobile navigation and user interface
  - Optimized preview system for mobile devices

## üì± User Interface Updates
- **Wider Page Layouts**: Expanded content areas for better editing experience
  - Increased maximum width for create_post page (800px ‚Üí 1400px)
  - Better space utilization for side-by-side editor/preview layout
  - Enhanced mobile responsiveness with proper stacking
- **Enhanced Navigation**: Improved user navigation and accessibility
  - Added watchlist links to sidebar and dashboard
  - Better visual hierarchy and user flow
  - Enhanced dropdown menus and navigation elements

## üõ†Ô∏è Developer Experience
- **Better Error Handling**: Comprehensive error logging and debugging
  - Added detailed error logging for troubleshooting
  - Enhanced AJAX error responses with specific error codes
  - Improved development and debugging capabilities
- **Code Organization**: Better function organization and documentation
  - Added utility functions for common operations
  - Enhanced function documentation and error handling
  - Improved code maintainability and readability

## üìä Impact Summary
- **12 files changed** with 1,103 insertions and 92 deletions
- **1 new file created** (watchlist functionality)
- **4 critical bugs fixed** affecting core functionality
- **3 major new features** added (live preview, watchlist, enhanced timestamps)
- **Significant improvements** to user experience and developer experience

## üöÄ What's Next
This release focuses on stability and core functionality improvements. Future releases will build upon this solid foundation with additional features and enhancements.

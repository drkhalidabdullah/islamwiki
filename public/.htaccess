# IslamWiki Framework - Public Directory Apache Configuration
# Author: Khalid Abdullah
# Version: 0.0.5
# Date: 2025-01-27
# License: AGPL-3.0

# Enable URL rewriting
RewriteEngine On

# Route API requests to the API handler FIRST
RewriteRule ^api/(.*)$ /api/index.php [END]

# Route admin API requests to the API handler
RewriteRule ^admin/api/(.*)$ /api/index.php [END]

# Handle static assets (CSS, JS, images, etc.)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^assets/(.*)$ assets/$1 [END]

# Handle favicon and other static files
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(favicon\.ico|apple-touch-icon\.png|favicon-32x32\.png|favicon-16x16\.png)$ $1 [END]

# For all other requests, serve the React app (index.html)
# This enables client-side routing for the SPA
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.html [END] 